{"version":3,"file":"Draggable.js","names":["Draggable","Component","constructor","go","onStart","_inputPlugin","gameObject","scene","app","findPlugin","Input","Error","_collider","findComponent","Collider","onUpdate","getMouseButtonDown","mousePos","getMousePosition","ray","activeCamera","viewportPointToRay2D","raycast"],"sources":["../../src/components/Draggable.ts"],"sourcesContent":["import Collider from \"./Collider\";\r\nimport Input from \"../plugins/Input\";\r\nimport { IGameObject, Component, Vector2, Ray2D } from \"@inemotion/core\";\r\n\r\nexport default class Draggable extends Component {\r\n  private _inputPlugin: Input;\r\n  private _collider: Collider;\r\n  constructor(go: IGameObject) {\r\n    super(go);\r\n  }\r\n  public onStart() {\r\n    this._inputPlugin = this.gameObject.scene.app.findPlugin(Input) as Input;\r\n\r\n    if (!this._inputPlugin) {\r\n      throw new Error(\"To use Draggable component the plugin Input should be added to the application\");\r\n    }\r\n\r\n    this._collider = this.gameObject.findComponent(Collider) as Collider;\r\n\r\n    if (!this._collider) {\r\n      throw new Error(\"To use Draggable component you need to add Collider component to the GameObject\");\r\n    }\r\n  }\r\n  public onUpdate() {\r\n    if (this._inputPlugin.getMouseButtonDown(0)) {\r\n      const mousePos: Vector2 = this._inputPlugin.getMousePosition();\r\n      const ray: Ray2D = this.gameObject.scene.app.activeCamera.viewportPointToRay2D(mousePos);\r\n      if (this._collider.raycast(ray)) {\r\n        // Drag!\r\n      }\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;AAAA;AACA;AACA;AAAyE;AAAA;AAAA;AAAA;AAE1D,MAAMA,SAAS,SAASC,eAAS,CAAC;EAG/CC,WAAW,CAACC,EAAe,EAAE;IAC3B,KAAK,CAACA,EAAE,CAAC;IAAC;IAAA;EACZ;EACOC,OAAO,GAAG;IACf,IAAI,CAACC,YAAY,GAAG,IAAI,CAACC,UAAU,CAACC,KAAK,CAACC,GAAG,CAACC,UAAU,CAACC,cAAK,CAAU;IAExE,IAAI,CAAC,IAAI,CAACL,YAAY,EAAE;MACtB,MAAM,IAAIM,KAAK,CAAC,gFAAgF,CAAC;IACnG;IAEA,IAAI,CAACC,SAAS,GAAG,IAAI,CAACN,UAAU,CAACO,aAAa,CAACC,iBAAQ,CAAa;IAEpE,IAAI,CAAC,IAAI,CAACF,SAAS,EAAE;MACnB,MAAM,IAAID,KAAK,CAAC,iFAAiF,CAAC;IACpG;EACF;EACOI,QAAQ,GAAG;IAChB,IAAI,IAAI,CAACV,YAAY,CAACW,kBAAkB,CAAC,CAAC,CAAC,EAAE;MAC3C,MAAMC,QAAiB,GAAG,IAAI,CAACZ,YAAY,CAACa,gBAAgB,EAAE;MAC9D,MAAMC,GAAU,GAAG,IAAI,CAACb,UAAU,CAACC,KAAK,CAACC,GAAG,CAACY,YAAY,CAACC,oBAAoB,CAACJ,QAAQ,CAAC;MACxF,IAAI,IAAI,CAACL,SAAS,CAACU,OAAO,CAACH,GAAG,CAAC,EAAE,CAEjC;IACF;EACF;AACF;AAAC"}