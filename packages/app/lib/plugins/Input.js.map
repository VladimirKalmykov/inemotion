{"version":3,"file":"Input.js","names":["Input","Plugin","mouse","buttons","position","Vector2","zero","e","state","button","pressed","nativeEvent","clientX","clientY","onStart","app","renderer","element","addEventListener","mouseDownHandler","mouseUpHandler","mouseMoveHandler","onDestroy","removeEventListener","getMouseButtonDown","geMouseButtonEvent","getMousePosition"],"sources":["../../src/plugins/Input.ts"],"sourcesContent":["import { Plugin, Vector2 } from \"@inemotion/core\";\r\n\r\nexport default class Input extends Plugin {\r\n  private state = {\r\n    mouse: {\r\n      buttons: {},\r\n      position: Vector2.zero,\r\n    },\r\n  };\r\n\r\n  /** On application start */\r\n  public onStart() {\r\n    this.app.renderer.element.addEventListener(\"mousedown\", this.mouseDownHandler);\r\n    this.app.renderer.element.addEventListener(\"mouseup\", this.mouseUpHandler);\r\n    this.app.renderer.element.addEventListener(\"mousemove\", this.mouseMoveHandler);\r\n  }\r\n\r\n  /** Before application will destroy */\r\n  public onDestroy() {\r\n    this.app.renderer.element.removeEventListener(\"mousedown\", this.mouseDownHandler);\r\n    this.app.renderer.element.removeEventListener(\"mouseup\", this.mouseUpHandler);\r\n  }\r\n\r\n  /** Get mouse button down state */\r\n  public getMouseButtonDown(button: number) {\r\n    return this.state.mouse.buttons[button] && this.state.mouse.buttons[button].pressed;\r\n  }\r\n\r\n  /** Get latest mouse event for specifyc button */\r\n  public geMouseButtonEvent(button: number): MouseEvent {\r\n    return this.state.mouse.buttons[button] && this.state.mouse.buttons[button].nativeEvent;\r\n  }\r\n\r\n  /** Get mouse position */\r\n  public getMousePosition() {\r\n    return this.state.mouse.position;\r\n  }\r\n\r\n  /** Mouse down handler */\r\n  private mouseDownHandler = (e: MouseEvent) => {\r\n    this.state.mouse.buttons[e.button] = {\r\n      pressed: true,\r\n      nativeEvent: e,\r\n    };\r\n  }\r\n\r\n  /** Mouse up handler */\r\n  private mouseUpHandler = (e: MouseEvent) => {\r\n    this.state.mouse.buttons[e.button] = {\r\n      pressed: false,\r\n      nativeEvent: e,\r\n    };\r\n  }\r\n\r\n  /** Mouse move handler */\r\n  private mouseMoveHandler = (e: MouseEvent) => {\r\n    this.state.mouse.position = new Vector2(\r\n      e.clientX,\r\n      e.clientY,\r\n    );\r\n  }\r\n}\r\n"],"mappings":";;;;;;AAAA;AAAkD;AAAA;AAAA;AAEnC,MAAMA,KAAK,SAASC,YAAM,CAAC;EAAA;IAAA;IAAA,+BACxB;MACdC,KAAK,EAAE;QACLC,OAAO,EAAE,CAAC,CAAC;QACXC,QAAQ,EAAEC,aAAO,CAACC;MACpB;IACF,CAAC;IAAA,0CA+B2BC,CAAa,IAAK;MAC5C,IAAI,CAACC,KAAK,CAACN,KAAK,CAACC,OAAO,CAACI,CAAC,CAACE,MAAM,CAAC,GAAG;QACnCC,OAAO,EAAE,IAAI;QACbC,WAAW,EAAEJ;MACf,CAAC;IACH,CAAC;IAAA,wCAGyBA,CAAa,IAAK;MAC1C,IAAI,CAACC,KAAK,CAACN,KAAK,CAACC,OAAO,CAACI,CAAC,CAACE,MAAM,CAAC,GAAG;QACnCC,OAAO,EAAE,KAAK;QACdC,WAAW,EAAEJ;MACf,CAAC;IACH,CAAC;IAAA,0CAG2BA,CAAa,IAAK;MAC5C,IAAI,CAACC,KAAK,CAACN,KAAK,CAACE,QAAQ,GAAG,IAAIC,aAAO,CACrCE,CAAC,CAACK,OAAO,EACTL,CAAC,CAACM,OAAO,CACV;IACH,CAAC;EAAA;EAjDMC,OAAO,GAAG;IACf,IAAI,CAACC,GAAG,CAACC,QAAQ,CAACC,OAAO,CAACC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAACC,gBAAgB,CAAC;IAC9E,IAAI,CAACJ,GAAG,CAACC,QAAQ,CAACC,OAAO,CAACC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACE,cAAc,CAAC;IAC1E,IAAI,CAACL,GAAG,CAACC,QAAQ,CAACC,OAAO,CAACC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAACG,gBAAgB,CAAC;EAChF;EAGOC,SAAS,GAAG;IACjB,IAAI,CAACP,GAAG,CAACC,QAAQ,CAACC,OAAO,CAACM,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAACJ,gBAAgB,CAAC;IACjF,IAAI,CAACJ,GAAG,CAACC,QAAQ,CAACC,OAAO,CAACM,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAACH,cAAc,CAAC;EAC/E;EAGOI,kBAAkB,CAACf,MAAc,EAAE;IACxC,OAAO,IAAI,CAACD,KAAK,CAACN,KAAK,CAACC,OAAO,CAACM,MAAM,CAAC,IAAI,IAAI,CAACD,KAAK,CAACN,KAAK,CAACC,OAAO,CAACM,MAAM,CAAC,CAACC,OAAO;EACrF;EAGOe,kBAAkB,CAAChB,MAAc,EAAc;IACpD,OAAO,IAAI,CAACD,KAAK,CAACN,KAAK,CAACC,OAAO,CAACM,MAAM,CAAC,IAAI,IAAI,CAACD,KAAK,CAACN,KAAK,CAACC,OAAO,CAACM,MAAM,CAAC,CAACE,WAAW;EACzF;EAGOe,gBAAgB,GAAG;IACxB,OAAO,IAAI,CAAClB,KAAK,CAACN,KAAK,CAACE,QAAQ;EAClC;AAyBF;AAAC"}