{"version":3,"file":"ShowColliders.js","names":["ShowGameObjectCenter","Plugin","onUI","gameObject","app","activeScene","gameObjects","collider","findComponent","Collider","boundingRect","getBoundingRect","rectStart","Vector2","add","transform","position","rectEnd","drawRect","renderer","context","activeCamera","worldToViewportPoint","ctx","rect","backupStyle","strokeStyle","beginPath","x","y","stroke"],"sources":["../../src/plugins/ShowColliders.ts"],"sourcesContent":["import { Plugin, Vector2 } from \"@inemotion/core\";\r\nimport Collider from \"../components/Collider\";\r\n\r\nexport default class ShowGameObjectCenter extends Plugin {\r\n  public onUI() {\r\n    for (const gameObject of this.app.activeScene.gameObjects) {\r\n      const collider = gameObject.findComponent(Collider);\r\n      if (collider) {\r\n        /* Get rectangular borders of collider */\r\n        const boundingRect = (collider as Collider).getBoundingRect();\r\n        /* Add to game object position */\r\n        const rectStart = Vector2.add(\r\n          gameObject.transform.position,\r\n          boundingRect[0],\r\n        );\r\n        const rectEnd = Vector2.add(\r\n          gameObject.transform.position,\r\n          boundingRect[1],\r\n        );\r\n        /* Draw rect in UI canvas */\r\n        this.drawRect(\r\n          this.app.renderer.context,\r\n          [\r\n            this.app.activeCamera.worldToViewportPoint(rectStart),\r\n            this.app.activeCamera.worldToViewportPoint(rectEnd),\r\n          ],\r\n        );\r\n      }\r\n    }\r\n  }\r\n  private drawRect(ctx: CanvasRenderingContext2D, rect: Vector2[]) {\r\n    const backupStyle = ctx.strokeStyle;\r\n    ctx.strokeStyle = \"pink\";\r\n\r\n    ctx.beginPath();\r\n    ctx.rect(rect[0].x, rect[0].y, rect[1].x - rect[0].x, rect[1].y - rect[0].y);\r\n    ctx.stroke();\r\n\r\n    // Repair fill style\r\n    ctx.strokeStyle = backupStyle;\r\n  }\r\n}\r\n"],"mappings":";;;;;;AAAA;AACA;AAA8C;AAE/B,MAAMA,oBAAoB,SAASC,YAAM,CAAC;EAChDC,IAAI,GAAG;IACZ,KAAK,MAAMC,UAAU,IAAI,IAAI,CAACC,GAAG,CAACC,WAAW,CAACC,WAAW,EAAE;MACzD,MAAMC,QAAQ,GAAGJ,UAAU,CAACK,aAAa,CAACC,iBAAQ,CAAC;MACnD,IAAIF,QAAQ,EAAE;QAEZ,MAAMG,YAAY,GAAIH,QAAQ,CAAcI,eAAe,EAAE;QAE7D,MAAMC,SAAS,GAAGC,aAAO,CAACC,GAAG,CAC3BX,UAAU,CAACY,SAAS,CAACC,QAAQ,EAC7BN,YAAY,CAAC,CAAC,CAAC,CAChB;QACD,MAAMO,OAAO,GAAGJ,aAAO,CAACC,GAAG,CACzBX,UAAU,CAACY,SAAS,CAACC,QAAQ,EAC7BN,YAAY,CAAC,CAAC,CAAC,CAChB;QAED,IAAI,CAACQ,QAAQ,CACX,IAAI,CAACd,GAAG,CAACe,QAAQ,CAACC,OAAO,EACzB,CACE,IAAI,CAAChB,GAAG,CAACiB,YAAY,CAACC,oBAAoB,CAACV,SAAS,CAAC,EACrD,IAAI,CAACR,GAAG,CAACiB,YAAY,CAACC,oBAAoB,CAACL,OAAO,CAAC,CACpD,CACF;MACH;IACF;EACF;EACQC,QAAQ,CAACK,GAA6B,EAAEC,IAAe,EAAE;IAC/D,MAAMC,WAAW,GAAGF,GAAG,CAACG,WAAW;IACnCH,GAAG,CAACG,WAAW,GAAG,MAAM;IAExBH,GAAG,CAACI,SAAS,EAAE;IACfJ,GAAG,CAACC,IAAI,CAACA,IAAI,CAAC,CAAC,CAAC,CAACI,CAAC,EAAEJ,IAAI,CAAC,CAAC,CAAC,CAACK,CAAC,EAAEL,IAAI,CAAC,CAAC,CAAC,CAACI,CAAC,GAAGJ,IAAI,CAAC,CAAC,CAAC,CAACI,CAAC,EAAEJ,IAAI,CAAC,CAAC,CAAC,CAACK,CAAC,GAAGL,IAAI,CAAC,CAAC,CAAC,CAACK,CAAC,CAAC;IAC5EN,GAAG,CAACO,MAAM,EAAE;IAGZP,GAAG,CAACG,WAAW,GAAGD,WAAW;EAC/B;AACF;AAAC"}